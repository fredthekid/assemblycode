STACK_SEG SEGMENT STACK 'STACK'
DB 64 DUP(?)
STACK_SEG ENDS

DATA_SEG SEGMENT PUBLIC 'DATA'
	PUBLIC MSG1,MSGC1,MSG2,MSGC2;
	MSG1 DB CR, LF, "HoW MaNy InTeGeRs Would you like to enter?(Hex digit must be in CAPS)", CR,LF
	MSG2 DB CR,LF, "YoU eNtErEd these numbas!", CR
	MSGC1 EQU MSG2-MSG1
	MSGC2 EQU $-MSG2
	CR EQU 0DH
	LF EQU 0AH
DATA_SEG ENDS

CODE_SEG SEGMENT PUBLIC'CODE'
LAB3 PROC FAR
	EXTRN DISPLAY1:NEAR; DECLARE DISPLAY ROUTINES
	EXTRN DISPLAY2:NEAR
	ASSUME CS:CODE_SEG,SS:STACK_SEG,DS:DATA_SEG
	PUSH DS
	MOV AX,0
	PUSH AX
	MOV AX, DATA_SEG
	MOV DS,AX
	CALL DISPLAY1

NUMINTS:
	MOV AH,02H
	MOV DL,LF
	INT 21H
	MOV AH,02H
	MOV DL,4EH
	INT 21H
	MOV AH,01H
	INT 21H
	CMP AL,46H
	JG NUMINTS
	CMP AL,40H
	JG SUB7
	CMP AL,39H
	JG NUMINTS
	CMP AL,31H
	JG CONTINUE
	JMP NUMINTS
SUB7:
	SUB AL,07H
	JMP CONTINUE
CONTINUE:
	MOV DI,0200H
	MOV [DI],AL
	MOV DL,0
	MOV CX,0100H
INITARRAY:
	ADD DI,1
	MOV [DI],DL
	DEC CX
	JNZ INITARRAY
	MOV DI,0200H
	MOV CL,[DI]
	SUB CX, "0"
	MOV DH,31H
	MOV BX,0200H
	MOV DI,01H
INPUTCOUNTLOOP:
	MOV AH,02H
	MOV DL,LF
	INT 21H
	MOV DL,DH
	INT 21H
	MOV DL,20H
	INT 21H
	MOV AH,01H
	INT 21H
	CMP AL, "F"
	JG INPUTCOUNTLOOP
	CMP AL, 40H;
	JG TOARRAY;
	CMP AL,39H
	JG INPUTCOUNTLOOP
	CMP AL,2FH
	JG TOARRAY
	JMP INPUTCOUNTLOOP
TOARRAY:
	MOV AH,0
	MOV [BX+DI],AL
	INC DI
	INC DH
	DEC CX
	JZ COUNT
	CMP DH, ":"
	JE ADD7
	JMP INPUTCOUNTLOOP
ADD7:
	ADD DH,07H
	JMP INPUTCOUNTLOOP
COUNT:
	CALL DISPLAY2
	MOV CX,0FH
	MOV SI,01H
	MOV DX,0
	MOV BX,0200H
COUNTLOOP:
	MOV DL,[BX+SI]
	MOV DI,DX
	MOV DL,[BX+DI]
	INC DL
	MOV [BX+DI],DL
	INC SI
	DEC CX
	JNZ COUNTLOOP
	MOV CX,("H"-"0")
	MOV SI,"0"
FINAL:
	DEC CX
	JZ LAST
	MOV DL,[BX+SI]
	CMP DL,0
	JG PRINTVALUE
	INC SI
	JMP FINAL
PRINTVALUE:
	MOV AH,02H
	MOV DL, LF
	INT 21H
	MOV DL, [BX+SI]
	CMP DL,09H
	JG ADJUST
	ADD DL, 30H
BACK:
	INT 21H
	MOV DL,20H
	INT 21H
	MOV DX,SI
	INT 21H
	INC SI
	JMP FINAL
ADJUST:
	ADD DL,37H
	JMP BACK
LAST:
	RET
LAB3 ENDP
CODE_SEG ENDS
END LAB3
